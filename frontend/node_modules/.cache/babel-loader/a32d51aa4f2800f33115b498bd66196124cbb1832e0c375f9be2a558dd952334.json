{"ast":null,"code":"import axios from 'axios';\nimport { toast } from 'react-toastify';\nimport config from '../config/environment';\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: config.API_URL,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor\napi.interceptors.response.use(response => {\n  return response;\n}, error => {\n  var _error$response, _error$response$data, _error$response2;\n  const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'An error occurred';\n\n  // Don't show toast for certain endpoints (like auth check)\n  const silentEndpoints = ['/auth/me'];\n  const shouldShowToast = !silentEndpoints.some(endpoint => {\n    var _error$config, _error$config$url;\n    return (_error$config = error.config) === null || _error$config === void 0 ? void 0 : (_error$config$url = _error$config.url) === null || _error$config$url === void 0 ? void 0 : _error$config$url.includes(endpoint);\n  });\n  if (shouldShowToast && ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) !== 401) {\n    toast.error(message);\n  }\n  return Promise.reject(error);\n});\n\n// Auth API\nexport const authAPI = {\n  login: credentials => api.post('/auth/login', credentials),\n  logout: () => api.post('/auth/logout'),\n  getProfile: () => api.get('/auth/me'),\n  register: userData => api.post('/auth/register', userData),\n  updateProfile: userData => api.put('/auth/profile', userData)\n};\n\n// Users API\nexport const usersAPI = {\n  getUsers: (params = {}) => api.get('/users', {\n    params\n  }),\n  getUser: id => api.get(`/users/${id}`),\n  createUser: userData => api.post('/users', userData),\n  updateUser: (id, userData) => api.put(`/users/${id}`, userData),\n  deleteUser: id => api.delete(`/users/${id}`),\n  activateUser: id => api.put(`/users/${id}/activate`),\n  getUserStats: () => api.get('/users/stats/overview')\n};\n\n// Products API\nexport const productsAPI = {\n  getProducts: (params = {}) => api.get('/products', {\n    params\n  }),\n  getProduct: id => api.get(`/products/${id}`),\n  createProduct: productData => api.post('/products', productData),\n  updateProduct: (id, productData) => api.put(`/products/${id}`, productData),\n  deleteProduct: id => api.delete(`/products/${id}`),\n  activateProduct: id => api.put(`/products/${id}/activate`),\n  getCategories: () => api.get('/products/categories/list'),\n  getBrands: () => api.get('/products/brands/list'),\n  getLowStockProducts: (threshold = 10) => api.get('/products/low-stock', {\n    params: {\n      threshold\n    }\n  }),\n  getPopularProducts: (limit = 10) => api.get('/products/popular', {\n    params: {\n      limit\n    }\n  }),\n  getProductStats: () => api.get('/products/stats/overview')\n};\n\n// Analytics API\nexport const analyticsAPI = {\n  getDashboardData: () => api.get('/analytics/dashboard'),\n  getSalesTrends: (period = '6months') => api.get('/analytics/sales-trends', {\n    params: {\n      period\n    }\n  }),\n  getUserGrowth: (period = '12months') => api.get('/analytics/user-growth', {\n    params: {\n      period\n    }\n  }),\n  getCategoryDistribution: () => api.get('/analytics/category-distribution'),\n  getTopProducts: (params = {}) => api.get('/analytics/top-products', {\n    params\n  }),\n  getRecentActivities: (limit = 20) => api.get('/analytics/recent-activities', {\n    params: {\n      limit\n    }\n  }),\n  getPerformanceMetrics: () => api.get('/analytics/performance-metrics')\n};\n\n// Generic API helper functions\nexport const apiHelpers = {\n  // Handle API errors consistently\n  handleError: (error, defaultMessage = 'An error occurred') => {\n    var _error$response3, _error$response3$data;\n    const message = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || defaultMessage;\n    toast.error(message);\n    return message;\n  },\n  // Success message helper\n  showSuccess: message => {\n    toast.success(message);\n  },\n  // Format API response data\n  formatResponse: response => {\n    return response.data;\n  },\n  // Build query string from params\n  buildQueryString: params => {\n    const filteredParams = Object.entries(params).filter(([_, value]) => value !== '' && value !== null && value !== undefined).reduce((acc, [key, value]) => ({\n      ...acc,\n      [key]: value\n    }), {});\n    return new URLSearchParams(filteredParams).toString();\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","toast","config","api","create","baseURL","API_URL","withCredentials","headers","interceptors","request","use","error","Promise","reject","response","_error$response","_error$response$data","_error$response2","message","data","silentEndpoints","shouldShowToast","some","endpoint","_error$config","_error$config$url","url","includes","status","authAPI","login","credentials","post","logout","getProfile","get","register","userData","updateProfile","put","usersAPI","getUsers","params","getUser","id","createUser","updateUser","deleteUser","delete","activateUser","getUserStats","productsAPI","getProducts","getProduct","createProduct","productData","updateProduct","deleteProduct","activateProduct","getCategories","getBrands","getLowStockProducts","threshold","getPopularProducts","limit","getProductStats","analyticsAPI","getDashboardData","getSalesTrends","period","getUserGrowth","getCategoryDistribution","getTopProducts","getRecentActivities","getPerformanceMetrics","apiHelpers","handleError","defaultMessage","_error$response3","_error$response3$data","showSuccess","success","formatResponse","buildQueryString","filteredParams","Object","entries","filter","_","value","undefined","reduce","acc","key","URLSearchParams","toString"],"sources":["C:/Users/abuza/Desktop/Fiver/Admin Dashboard/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport config from '../config/environment';\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: config.API_URL,\r\n  withCredentials: true,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    const message = error.response?.data?.message || 'An error occurred';\r\n    \r\n    // Don't show toast for certain endpoints (like auth check)\r\n    const silentEndpoints = ['/auth/me'];\r\n    const shouldShowToast = !silentEndpoints.some(endpoint => \r\n      error.config?.url?.includes(endpoint)\r\n    );\r\n\r\n    if (shouldShowToast && error.response?.status !== 401) {\r\n      toast.error(message);\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  login: (credentials) => api.post('/auth/login', credentials),\r\n  logout: () => api.post('/auth/logout'),\r\n  getProfile: () => api.get('/auth/me'),\r\n  register: (userData) => api.post('/auth/register', userData),\r\n  updateProfile: (userData) => api.put('/auth/profile', userData),\r\n};\r\n\r\n// Users API\r\nexport const usersAPI = {\r\n  getUsers: (params = {}) => api.get('/users', { params }),\r\n  getUser: (id) => api.get(`/users/${id}`),\r\n  createUser: (userData) => api.post('/users', userData),\r\n  updateUser: (id, userData) => api.put(`/users/${id}`, userData),\r\n  deleteUser: (id) => api.delete(`/users/${id}`),\r\n  activateUser: (id) => api.put(`/users/${id}/activate`),\r\n  getUserStats: () => api.get('/users/stats/overview'),\r\n};\r\n\r\n// Products API\r\nexport const productsAPI = {\r\n  getProducts: (params = {}) => api.get('/products', { params }),\r\n  getProduct: (id) => api.get(`/products/${id}`),\r\n  createProduct: (productData) => api.post('/products', productData),\r\n  updateProduct: (id, productData) => api.put(`/products/${id}`, productData),\r\n  deleteProduct: (id) => api.delete(`/products/${id}`),\r\n  activateProduct: (id) => api.put(`/products/${id}/activate`),\r\n  getCategories: () => api.get('/products/categories/list'),\r\n  getBrands: () => api.get('/products/brands/list'),\r\n  getLowStockProducts: (threshold = 10) => api.get('/products/low-stock', { params: { threshold } }),\r\n  getPopularProducts: (limit = 10) => api.get('/products/popular', { params: { limit } }),\r\n  getProductStats: () => api.get('/products/stats/overview'),\r\n};\r\n\r\n// Analytics API\r\nexport const analyticsAPI = {\r\n  getDashboardData: () => api.get('/analytics/dashboard'),\r\n  getSalesTrends: (period = '6months') => api.get('/analytics/sales-trends', { params: { period } }),\r\n  getUserGrowth: (period = '12months') => api.get('/analytics/user-growth', { params: { period } }),\r\n  getCategoryDistribution: () => api.get('/analytics/category-distribution'),\r\n  getTopProducts: (params = {}) => api.get('/analytics/top-products', { params }),\r\n  getRecentActivities: (limit = 20) => api.get('/analytics/recent-activities', { params: { limit } }),\r\n  getPerformanceMetrics: () => api.get('/analytics/performance-metrics'),\r\n};\r\n\r\n// Generic API helper functions\r\nexport const apiHelpers = {\r\n  // Handle API errors consistently\r\n  handleError: (error, defaultMessage = 'An error occurred') => {\r\n    const message = error.response?.data?.message || defaultMessage;\r\n    toast.error(message);\r\n    return message;\r\n  },\r\n\r\n  // Success message helper\r\n  showSuccess: (message) => {\r\n    toast.success(message);\r\n  },\r\n\r\n  // Format API response data\r\n  formatResponse: (response) => {\r\n    return response.data;\r\n  },\r\n\r\n  // Build query string from params\r\n  buildQueryString: (params) => {\r\n    const filteredParams = Object.entries(params)\r\n      .filter(([_, value]) => value !== '' && value !== null && value !== undefined)\r\n      .reduce((acc, [key, value]) => ({ ...acc, [key]: value }), {});\r\n    \r\n    return new URLSearchParams(filteredParams).toString();\r\n  },\r\n};\r\n\r\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}